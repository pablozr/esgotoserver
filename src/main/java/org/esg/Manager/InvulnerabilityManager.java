package org.esg.Manager;

import org.bukkit.entity.LivingEntity;

import java.util.HashMap;
import java.util.Map;
import java.util.UUID;

public class InvulnerabilityManager {
    private static final Map<UUID, Integer> invulTicks = new HashMap<>();
    private static final int DEFAULT_INVUL_TICKS = 10; // PadrÃ£o do Minecraft: 10 ticks

    // Define o tempo de invulnerabilidade para uma entidade
    public static void setInvulTicks(LivingEntity entity, int ticks) {
        invulTicks.put(entity.getUniqueId(), ticks);
    }

    // Decrementa o contador de invulnerabilidade para todas as entidades
    public static void decrementInvulTicks() {
        for (UUID uuid : invulTicks.keySet()) {
            int current = invulTicks.get(uuid);
            if (current > 0) {
                invulTicks.put(uuid, current - 1);
            }
        }
    }



    public static boolean canTakeDamage(LivingEntity entity) {
        return !invulTicks.containsKey(entity.getUniqueId()) || invulTicks.get(entity.getUniqueId()) <= 0;
    }

    public static void resetInvulTicks(LivingEntity entity, int ticks) {
        invulTicks.put(entity.getUniqueId(), ticks);
    }
}